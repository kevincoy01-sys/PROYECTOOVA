<div class="ova-catalog-container">
  <div class="header">
    <h1>CatÃ¡logo de OVAs</h1>
    <button class="btn-primary" (click)="toggleForm()">
      {{ showForm ? 'Cancelar' : (isEditing ? 'Editar OVA' : 'Crear Nueva OVA') }}
    </button>
  </div>

  <!-- Barra de bÃºsqueda -->
  <div class="search-container" *ngIf="!showForm">
    <input 
      type="text" 
      class="search-input" 
      [(ngModel)]="searchTerm" 
      (input)="searchOvas()"
      placeholder="ğŸ” Buscar por tÃ­tulo, descripciÃ³n o autor...">
    <span class="search-results" *ngIf="searchTerm">
      {{ filteredOvas.length }} resultado(s) encontrado(s)
    </span>
  </div>

  <!-- Formulario de creaciÃ³n/ediciÃ³n -->
  <div class="form-container" *ngIf="showForm">
    <h2>{{ isEditing ? 'Editar OVA' : 'Nueva OVA' }}</h2>
    <form (ngSubmit)="createOva()">
      <div class="form-group">
        <label for="titulo">TÃ­tulo:<span class="required">*</span></label>
        <input 
          type="text" 
          id="titulo" 
          [(ngModel)]="newOva.titulo" 
          name="titulo" 
          required
          placeholder="Ingrese el tÃ­tulo">
      </div>

      <div class="form-group">
        <label for="descripcion">DescripciÃ³n:<span class="required">*</span></label>
        <textarea 
          id="descripcion" 
          [(ngModel)]="newOva.descripcion" 
          name="descripcion" 
          required
          rows="4"
          placeholder="Ingrese la descripciÃ³n"></textarea>
      </div>

      <div class="form-group">
        <label for="autor">Autor:<span class="required">*</span></label>
        <input 
          type="text" 
          id="autor" 
          [(ngModel)]="newOva.autor" 
          name="autor" 
          required
          placeholder="Ingrese el autor">
      </div>

      <button type="submit" class="btn-success">
        {{ isEditing ? 'Actualizar OVA' : 'Guardar OVA' }}
      </button>
    </form>
  </div>

  <!-- Lista de OVAs -->
  <div class="ovas-grid">
    <div class="ova-card" *ngFor="let ova of filteredOvas">
      <div class="ova-header">
        <h3>{{ ova.titulo }}</h3>
        <div class="ova-actions">
          <button class="btn-edit" (click)="editOva(ova)" title="Editar">âœï¸</button>
          <button class="btn-delete" (click)="deleteOva(ova.id)" title="Eliminar">ğŸ—‘ï¸</button>
        </div>
      </div>
      <p class="ova-description">{{ ova.descripcion }}</p>
      <div class="ova-footer">
        <span class="ova-author">ğŸ‘¤ {{ ova.autor }}</span>
        <span class="ova-date">ğŸ“… {{ ova.fechaCreacion }}</span>
      </div>
    </div>
  </div>

  <div class="empty-state" *ngIf="filteredOvas.length === 0 && !showForm">
    <p *ngIf="searchTerm">No se encontraron OVAs que coincidan con "{{ searchTerm }}"</p>
    <p *ngIf="!searchTerm">No hay OVAs disponibles. Â¡Crea la primera!</p>
  </div>
</div>
